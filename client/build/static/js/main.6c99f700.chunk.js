(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{12:function(e,a,t){e.exports={drawer:"ConversationsDrawer_drawer__2S6W4",openDrawer:"ConversationsDrawer_openDrawer__2Tlvy",close:"ConversationsDrawer_close__34hqr",searchList:"ConversationsDrawer_searchList__2c6an",searchListLoader:"ConversationsDrawer_searchListLoader__3Fl2h",searchItem:"ConversationsDrawer_searchItem__34ALg",searchName:"ConversationsDrawer_searchName__3t1xP",modalForm:"ConversationsDrawer_modalForm__h_kg_",searchInfo:"ConversationsDrawer_searchInfo__PAMkq",input:"ConversationsDrawer_input__2oy3P",name:"ConversationsDrawer_name__1fkbE",message:"ConversationsDrawer_message__PNKjH",modalButtons:"ConversationsDrawer_modalButtons__2hM7c",buttons:"ConversationsDrawer_buttons__3HxKi",icon:"ConversationsDrawer_icon__jgULI"}},13:function(e,a,t){e.exports={loader:"Chat_loader__2VN1t",chatWrapper:"Chat_chatWrapper__3tRuH",chat:"Chat_chat__3K6yI",header:"Chat_header__221jI",user:"Chat_user__3xnUc",text:"Chat_text__2UdoS",name:"Chat_name__Yyw9I",status:"Chat_status__1nBtr",messagesBox:"Chat_messagesBox__2bc0N",textForm:"Chat_textForm__3reSe",textField:"Chat_textField__26krv",icon:"Chat_icon__19zw3",sendIcon:"Chat_sendIcon__35CdD"}},152:function(e,a,t){},153:function(e,a,t){"use strict";t.r(a);var s=t(46),n=t.n(s),c=t(6),o=t(15),r=t(2),i=t(41),l=t(9),u=t(4),d=t.n(u),_=t(10),j=t(14),m=t.n(j);m.a.defaults.baseURL="http://localhost:5000";var p,O=function(e){e?m.a.defaults.headers.common.Authorization=e:delete m.a.defaults.headers.common.Authorization};!function(e){e.AUTH_REQUEST="AUTH/AUTH_REQUEST",e.SUCCESS_REQUEST="AUTH/SUCCESS_REQUEST",e.FAIL_REQUEST="AUTH/FAIL_REQUEST",e.SET_CURRENT_USER="AUTH/SET_CURRENT_USER",e.USER_LOGOUT="AUTH/USER_LOGOUT",e.CATCH_ERROR="CATCH_ERROR",e.REMOVE_ERROR="REMOVE_ERROR",e.CONVERSATIONS_REQUEST="CONVERSATIONS/CONVERSATIONS_REQUEST",e.CONVERSATIONS_SUCCESS_REQUEST="CONVERSATIONS/SUCCESS_REQUEST",e.CONVERSATIONS_FAIL_REQUEST="CONVERSATIONS/FAIL_REQUEST",e.CREATE_CONVERSATION_REQUEST="CONVERSATIONS/CREATE_CONVERSATION_REQUEST",e.CREATE_CONVERSATION_SUCCESS_REQUEST="CONVERSATIONS/CREATE_CONVERSATION_SUCCESS_REQUEST",e.CREATE_CONVERSATION_FAIL_REQUEST="CONVERSATIONS/CREATE_CONVERSATION_FAIL_REQUEST",e.CONVERSATIONS_ADD_CONVERSATION="CONVERSATIONS/CONVERSATIONS_ADD_CONVERSATION ",e.CONVERSATIONS_UPDATE_LAST_MESSAGE="CONVERSATIONS/CONVERSATIONS_UPDATE_LAST_MESSAGE ",e.MESSAGES_REQUEST="MESSAGES/MESSAGES_REQUEST",e.MESSAGES_SUCCESS_REQUEST="MESSAGES/SUCCESS_REQUEST",e.MESSAGES_FAIL_REQUEST="MESSAGES/FAIL_REQUEST",e.MESSAGES_ADD_MESSAGE="MESSAGES/MESSAGE_ADD_MESSAGE"}(p||(p={}));var h=function(e){return function(){var a=Object(_.a)(d.a.mark((function a(t){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:localStorage.removeItem("jwtToken"),t({type:p.USER_LOGOUT}),e.push("/login");case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},b=function(e){return{type:p.SET_CURRENT_USER,payload:e}},f=t(48),g=t(52),S=t.n(g),E=t(1),v=function(){return Object(E.jsx)("div",{className:S.a.logo,children:Object(E.jsxs)(o.c,{className:S.a.link,to:"/",children:[Object(E.jsx)(f.a,{className:S.a.icon}),"Nolanger"]})})},x=t(63),N=t.n(x),C=function(){return Object(E.jsx)("header",{className:N.a.navbar,children:Object(E.jsx)("div",{className:"".concat(N.a.navbarInner," container"),children:Object(E.jsx)(v,{})})})},T=t(7),R=t(27),A=t(50),y=t(49),I=function(e){var a=e.split("T")[0],t=a.slice(8,10),s=a.slice(5,7),n=a.slice(0,4),c=e.split("T")[1].slice(0,5);return{fullDate:function(){return"".concat(t,".").concat(s,".").concat(n," at ").concat(c)},timeOnly:function(){return c}}},w=t(91),U=t.n(w),k=function(e){var a=e.src,t=e.size;return Object(E.jsx)("img",{className:U.a.avatar,src:a,alt:"avatar",style:{width:t,height:t}})},L=t(29),M=t.n(L),D=function(e){var a=e.mine,t=e.text,s=e.avatar,n=e.name,c=e.time;return Object(E.jsxs)("li",{className:a?M.a.rightMessage:M.a.leftMessage,children:[Object(E.jsxs)("div",{className:M.a.user,children:[Object(E.jsx)(k,{src:s,size:"55px"}),Object(E.jsx)("span",{children:n})]}),Object(E.jsxs)("p",{className:a?M.a.rightText:M.a.leftText,children:[t,Object(E.jsx)("span",{className:a?M.a.rightTime:M.a.leftTime,children:I(c).timeOnly()})]})]})},V=function(e){return{type:p.CATCH_ERROR,payload:e}},Q=function(){return{type:p.REMOVE_ERROR}},F=t(53),G=t.n(F),W=function(e){var a=e.width,t=e.color;return Object(E.jsx)("div",{className:G.a.loader,style:{width:a},children:Object(E.jsx)("svg",{className:G.a.circular,viewBox:"25 25 50 50",children:Object(E.jsx)("circle",{className:G.a.path,cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"4",strokeMiterlimit:"10",stroke:t})})})},H=t(13),B=t.n(H),P=t(64),z=t(31),q=t.n(z),Y=function(e){var a=e.onClick,t=Object(r.useState)(!1),s=Object(T.a)(t,2),n=s[0],c=s[1],o=Object(r.useRef)(null);return Object(r.useEffect)((function(){!function(e,a){var t=function(t){e.current&&!e.current.contains(t.target)&&a(!1)};document.addEventListener("mousedown",t)}(o,c)}),[o]),Object(E.jsxs)("div",{className:q.a.emojis,children:[Object(E.jsx)("span",{className:q.a.emoji,onClick:function(){c(!n)},children:P[0].unicode}),Object(E.jsx)("ul",{ref:o,className:n?q.a.emojisList:"".concat(q.a.emojisList," ").concat(q.a.emojisListHide),children:P.map((function(e,t){return Object(E.jsx)("li",{className:q.a.emoji,onClick:a,children:e.unicode},t+Date.now())}))})]})},J=function(){var e=Object(r.useRef)(null),a=Object(r.useState)(""),t=Object(T.a)(a,2),s=t[0],n=t[1],i=Object(c.b)(),u=Object(c.c)((function(e){return e.auth})).user,j=Object(c.c)((function(e){return e.messages})),O=j.messages,h=j.loading,b=Object(c.c)((function(e){return e.conversations})).conversations,f=Object(l.h)().id,g=Object(r.useState)("Offline"),S=Object(T.a)(g,2),v=S[0];S[1];return Object(r.useEffect)((function(){i(function(e){return function(){var a=Object(_.a)(d.a.mark((function a(t){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t({type:p.MESSAGES_REQUEST}),m.a.post("message/getAll",{conversationId:e}).then((function(e){t({type:p.MESSAGES_SUCCESS_REQUEST,payload:e.data})})).catch((function(e){return console.log(e)}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(f))}),[f]),Object(r.useEffect)((function(){e.current&&e.current.scrollTo(0,999999)}),[O]),Object(E.jsx)("div",{className:"".concat(B.a.chatWrapper," container"),children:h?Object(E.jsx)("div",{className:B.a.loader,children:Object(E.jsx)(W,{width:"60px",color:"#fd4d4d"})}):Object(E.jsxs)("div",{className:B.a.chat,children:[Object(E.jsxs)("div",{className:B.a.header,children:[Object(E.jsx)(o.b,{to:"/chat",children:Object(E.jsx)(y.a,{className:B.a.icon})}),Object(E.jsxs)("div",{className:B.a.user,children:[Object(E.jsx)(k,{src:"https://st4.depositphotos.com/4329009/19956/v/600/depositphotos_199564354-stock-illustration-creative-vector-illustration-default-avatar.jpg",size:"66px"}),Object(E.jsxs)("div",{className:B.a.text,children:[Object(E.jsx)("p",{className:B.a.name,children:b.map((function(e){if(e._id===f)return e.author._id===u._id?e.partner.name:e.author.name}))}),Object(E.jsx)("span",{className:B.a.status,children:v})]})]}),Object(E.jsx)("button",{className:B.a.icon,children:Object(E.jsx)(A.a,{})})]}),Object(E.jsx)("ul",{className:B.a.messagesBox,ref:e,children:O.map((function(e){return Object(E.jsx)(D,{mine:u._id===e.createdBy._id,avatar:"https://images.unsplash.com/photo-1556103255-4443dbae8e5a?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8cGhvdG9ncmFwaGVyfGVufDB8fDB8fA%3D%3D&ixlib=rb-1.2.1&w=1000&q=80",name:e.createdBy.name,text:e.text,time:e.createdAt},e._id)}))}),Object(E.jsxs)("form",{className:B.a.textForm,onSubmit:function(e){e.preventDefault(),0!==s.length&&i(function(e,a,t){return function(){var s=Object(_.a)(d.a.mark((function s(n){return d.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:m.a.post("message/create",{text:t,conversationId:a,id:e}).catch((function(e){e.response?(n(V(e.response.data.message)),n({type:p.CONVERSATIONS_FAIL_REQUEST})):(n({type:p.CATCH_ERROR,payload:"No server response. Please try letter."}),n({type:p.CONVERSATIONS_FAIL_REQUEST}))}));case 1:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(u._id,f,s)),n("")},children:[Object(E.jsx)("button",{className:B.a.icon,children:Object(E.jsx)(R.b,{})}),Object(E.jsx)(Y,{onClick:function(e){n(s+e.target.innerHTML)}}),Object(E.jsx)("input",{className:B.a.textField,type:"text",placeholder:"Message...",value:s,onChange:function(e){n(e.target.value)}}),Object(E.jsx)("button",{className:"".concat(B.a.icon," ").concat(B.a.sendIcon),disabled:0===s.length,children:Object(E.jsx)(R.d,{})})]})]})})},K=t(65),X=t(28),Z=t.n(X),$=function(e){var a=e.children,t=Object(c.b)();return Object(r.useEffect)((function(){setTimeout((function(){t(Q())}),4e3)}),[]),Object(E.jsxs)("div",{className:Z.a.toast,children:[Object(E.jsx)("span",{className:Z.a.toastIcon,children:Object(E.jsx)(K.b,{})}),Object(E.jsx)("div",{className:Z.a.toastContent,children:a}),Object(E.jsx)("button",{className:Z.a.toastClose,onClick:function(){t(Q())},children:Object(E.jsx)(K.a,{className:Z.a.toastCloseIcon})})]})},ee=function(e){var a=e.toast;return Object(E.jsx)("div",{className:Z.a.toastContainer,children:Object(E.jsx)($,{children:a})})},ae=t(32),te=t.n(ae),se=function(e){var a=e.path,t=e.message,s=e.name,n=e.time;return Object(E.jsxs)(o.c,{className:te.a.conversation,to:"/chat/"+a,activeClassName:te.a.active,children:[Object(E.jsx)(k,{src:"https://st4.depositphotos.com/4329009/19956/v/600/depositphotos_199564354-stock-illustration-creative-vector-illustration-default-avatar.jpg",size:"46px"}),Object(E.jsxs)("div",{className:te.a.text,children:[Object(E.jsx)("p",{className:te.a.name,children:s}),Object(E.jsx)("p",{className:te.a.message,children:t})]}),Object(E.jsx)("span",{className:te.a.time,children:n})]})},ne=t(20),ce=t.n(ne),oe=t(37),re=t.n(oe),ie=function(e){var a=e.children,t=e.onClick,s=e.disabled,n=e.loading;return Object(E.jsxs)("button",{className:re.a.button,disabled:s,onClick:t,children:[a,Object(E.jsx)("div",{className:n?"".concat(re.a.loadingWrapper," ").concat(re.a.showLoading):"".concat(re.a.loadingWrapper," ").concat(re.a.hideLoading),children:Object(E.jsx)(W,{width:"24px",color:"#fff"})})]})},le=t(33),ue=t.n(le),de=function(e){var a=e.children,t=e.state,s=e.close;return Object(E.jsx)("div",{className:t?ue.a.modalWrapper:"".concat(ue.a.modalWrapper," ").concat(ue.a.modalWrapperHide),onClick:s,children:Object(E.jsx)("div",{className:t?ue.a.modal:"".concat(ue.a.modal," ").concat(ue.a.modalHide),onClick:function(e){e.stopPropagation()},children:a})})},_e=t(54),je=t.n(_e),me=function(e){var a=e.onSubmit,t=e.onChange,s=e.disabled;return Object(E.jsxs)("form",{className:je.a.form,onSubmit:a,children:[Object(E.jsx)("input",{className:je.a.input,placeholder:"Search...",onChange:t}),Object(E.jsx)("button",{className:je.a.button,disabled:s,children:Object(E.jsx)(R.c,{})})]})},pe=t(12),Oe=t.n(pe),he=function(e){var a=e.state,t=e.close,s=Object(c.b)(),n=Object(c.c)((function(e){return e.auth})).user,o=Object(r.useState)(!1),i=Object(T.a)(o,2),l=i[0],u=i[1],j=Object(r.useState)(!1),O=Object(T.a)(j,2),h=O[0],b=O[1],f=Object(r.useState)(),g=Object(T.a)(f,2),S=g[0],v=g[1],x=Object(r.useState)([]),N=Object(T.a)(x,2),C=N[0],A=N[1],I=Object(r.useState)(0),w=Object(T.a)(I,2),U=w[0],k=w[1],L=Object(r.useState)(""),M=Object(T.a)(L,2),D=M[0],Q=M[1],F=Object(r.useState)(""),G=Object(T.a)(F,2),H=G[0],B=G[1],P=Object(r.useState)(0),z=Object(T.a)(P,2),q=z[0],Y=z[1],J=Object(r.useState)(10),K=Object(T.a)(J,1)[0],X=function(e){u(!0),m.a.post("/users?search=".concat(D,"&page=").concat(e,"&limit=").concat(K)).then((function(e){A(e.data.users),k(e.data.count),u(!1)})).catch((function(e){u(!1),s(V(e.response.data.message)),A([]),Y(0)}))};return Object(r.useEffect)((function(){D.length&&X(q)}),[q]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:a?Oe.a.drawer:"".concat(Oe.a.drawer," ").concat(Oe.a.openDrawer),children:[Object(E.jsx)("button",{className:Oe.a.close,onClick:t,children:Object(E.jsx)(y.a,{})}),Object(E.jsx)(me,{onSubmit:function(e){e.preventDefault(),X(q)},onChange:function(e){Q(e.target.value)},disabled:0===D.length||l}),l?Object(E.jsx)("div",{className:Oe.a.searchListLoader,children:Object(E.jsx)(W,{width:"60px",color:"#fd4d4d"})}):Object(E.jsx)("ul",{className:Oe.a.searchList,children:C.map((function(e){return Object(E.jsxs)("li",{className:Oe.a.searchItem,children:[Object(E.jsx)("span",{className:Oe.a.searchName,children:e.name}),Object(E.jsx)(ie,{onClick:function(){return function(e){v(e),b(!0)}(e)},children:Object(E.jsx)(R.a,{className:Oe.a.icon})})]},e._id)}))}),0!==C.length&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("div",{className:Oe.a.buttons,children:[Object(E.jsx)(ie,{onClick:function(){Y(q-1)},disabled:0===q||l,children:"Prev"}),Object(E.jsx)(ie,{onClick:function(){Y(q+1)},disabled:Math.ceil(U/K)===q+1||l,children:"Next"})]}),Object(E.jsxs)("div",{className:Oe.a.searchInfo,children:[Object(E.jsxs)("span",{children:["page: ",q+1+"/"+Math.ceil(U/K)]}),Object(E.jsx)("span",{children:"|"}),Object(E.jsxs)("span",{children:["results: ",U]})]})]})]}),Object(E.jsxs)(de,{state:h,close:function(){b(!1)},children:[Object(E.jsx)("h2",{children:"Create message"}),Object(E.jsxs)("form",{className:Oe.a.modalForm,onSubmit:function(e){var a,t,c;e.preventDefault(),S&&s((a=n._id,t=S._id,c=H,function(){var e=Object(_.a)(d.a.mark((function e(s){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s({type:p.CREATE_CONVERSATION_REQUEST}),n={author:a,partner:t,message:c},m.a.post("conversation/create",n).catch((function(e){e.response?(s(V(e.response.data.message)),s({type:p.CONVERSATIONS_FAIL_REQUEST})):(s({type:p.CATCH_ERROR,payload:"No server response. Please try letter."}),s({type:p.CONVERSATIONS_FAIL_REQUEST}))}));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())),b(!1),B("")},children:[Object(E.jsx)("input",{className:"".concat(Oe.a.input," ").concat(Oe.a.name),value:(null===S||void 0===S?void 0:S.name)||"",disabled:!0}),Object(E.jsx)("textarea",{className:"".concat(Oe.a.input," ").concat(Oe.a.message),placeholder:"Message...",onChange:function(e){B(e.target.value)},value:H}),Object(E.jsx)("div",{className:Oe.a.modalButtons,children:Object(E.jsx)(ie,{children:"Send"})})]})]})]})},be=t(55),fe=t.n(be),ge=function(){return Object(E.jsxs)("div",{className:fe.a.starter,children:[Object(E.jsx)(f.a,{className:fe.a.icon}),Object(E.jsx)("h1",{children:"Welcome!"}),Object(E.jsx)("h3",{className:fe.a.subtitle,children:"Open conversation to see messages."})]})},Se=function(){var e=Object(r.useState)(!1),a=Object(T.a)(e,2),t=a[0],s=a[1],n=Object(c.b)(),o=Object(c.c)((function(e){return e.auth})).user,i=Object(c.c)((function(e){return e.conversations})),u=i.conversations,j=i.loading,O=Object(l.g)(),b=function(){s(!0)};return Object(r.useEffect)((function(){n(function(){var e=Object(_.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:p.CONVERSATIONS_REQUEST}),m.a.get("conversation/getAll").then((function(e){a({type:p.CONVERSATIONS_SUCCESS_REQUEST,payload:e.data})})).catch((function(e){e.response?(a(V(e.response.data.message)),a({type:p.CONVERSATIONS_FAIL_REQUEST})):(a({type:p.CATCH_ERROR,payload:"No server response. Please try letter."}),a({type:p.CONVERSATIONS_FAIL_REQUEST}))}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}),[]),Object(E.jsxs)("div",{className:"".concat(ce.a.conversationsWrapper," container"),children:[Object(E.jsxs)("div",{className:ce.a.conversations,children:[Object(E.jsx)(he,{state:t,close:function(){s(!1)}}),Object(E.jsxs)("div",{className:ce.a.conversationInfo,children:[Object(E.jsxs)("div",{className:ce.a.text,children:[Object(E.jsx)(k,{size:"46px",src:"https://st4.depositphotos.com/4329009/19956/v/600/depositphotos_199564354-stock-illustration-creative-vector-illustration-default-avatar.jpg"}),Object(E.jsx)("span",{className:ce.a.name,children:o.name})]}),Object(E.jsxs)("div",{className:ce.a.icons,children:[Object(E.jsx)("span",{className:ce.a.tooltip,"data-tooltip":"Search",children:Object(E.jsx)(R.c,{onClick:b})}),Object(E.jsx)("span",{className:ce.a.tooltip,"data-tooltip":"Logout",children:Object(E.jsx)(A.b,{onClick:function(){n(h(O))}})})]})]}),j?Object(E.jsx)("div",{className:ce.a.loader,children:Object(E.jsx)(W,{width:"60px",color:"#fd4d4d"})}):u.length?Object(E.jsx)("ul",{className:ce.a.conversationsList,children:u.map((function(e){return Object(E.jsx)(se,{path:e._id,message:(a=e.lastMessage.text,t=24,a.length>t?a.slice(0,t)+" . . .":a),name:e.author._id===o._id?e.partner.name:e.author.name,time:I(e.lastMessage.createdAt).fullDate()},e._id);var a,t}))}):Object(E.jsxs)("div",{className:ce.a.empty,children:[Object(E.jsx)("h2",{children:"No conversations"}),Object(E.jsx)(ie,{onClick:b,children:"Search"})]}),Object(E.jsx)("div",{className:ce.a.logo,children:Object(E.jsx)(v,{})})]}),Object(E.jsx)(ge,{})]})},Ee=t(3),ve=t(51),xe=t(8),Ne=t.n(xe),Ce=function(){var e,a,t=Object(c.b)(),s=Object(c.c)((function(e){return e.auth})),n=s.loading,r=s.error,u=Object(l.g)(),j=Object(ve.a)(),h=j.register,f=j.handleSubmit,g=j.formState.errors;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("form",{className:Ne.a.form,onSubmit:f((function(e){t(function(e,a){return function(){var t=Object(_.a)(d.a.mark((function t(s){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:p.AUTH_REQUEST}),m.a.post("auth/login",e).then((function(e){var t=e.data.token;if(t){localStorage.setItem("jwtToken",t),O(t);var n=Object(i.a)(t);s(b(n)),s({type:p.SUCCESS_REQUEST}),a.push("/")}})).catch((function(e){e.response?(s({type:p.CATCH_ERROR,payload:e.response.data.message}),s({type:p.FAIL_REQUEST})):s({type:p.FAIL_REQUEST,payload:"No server response. Please try letter."})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e,u))})),noValidate:!0,children:[Object(E.jsxs)("div",{className:Ne.a.inputWrapper,children:[Object(E.jsx)("input",Object(Ee.a)({className:Ne.a.input,type:"text",placeholder:"Email"},h("email",{pattern:{value:/^[\w-]+@([\w-]+\.)+[\w-]{2,4}$/,message:"Invalid email"},required:{value:!0,message:"You must enter your email"}}))),Object(E.jsx)("span",{className:Ne.a.error,children:null===(e=g.email)||void 0===e?void 0:e.message})]}),Object(E.jsxs)("div",{className:Ne.a.inputWrapper,children:[Object(E.jsx)("input",Object(Ee.a)({className:Ne.a.input,type:"password",placeholder:"Password"},h("password",{minLength:{value:6,message:"Your password must be at least 6 characters"},required:{value:!0,message:"You must enter your password"}}))),Object(E.jsx)("span",{className:Ne.a.error,children:null===(a=g.password)||void 0===a?void 0:a.message})]}),Object(E.jsxs)("div",{className:Ne.a.formLinkWrapper,children:[Object(E.jsx)("span",{className:Ne.a.formSpan,children:"Don't have account?"}),Object(E.jsx)(o.b,{className:Ne.a.formLink,to:"/register",children:"Sign up"})]}),Object(E.jsx)(ie,{loading:n,disabled:n,children:"Sign in"})]}),r&&Object(E.jsx)(ee,{toast:r})]})},Te=function(){var e,a,t,s=Object(c.b)(),n=Object(c.c)((function(e){return e.auth})),r=n.loading,u=n.error,j=Object(l.g)(),h=Object(ve.a)(),f=h.register,g=h.handleSubmit,S=h.formState.errors;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)("form",{className:Ne.a.form,onSubmit:g((function(e){s(function(e,a){return function(){var t=Object(_.a)(d.a.mark((function t(s){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s({type:p.AUTH_REQUEST}),m.a.post("auth/register",e).then((function(e){var t=e.data.token;if(t){localStorage.setItem("jwtToken",t),O(t);var n=Object(i.a)(t);s(b(n)),s({type:p.SUCCESS_REQUEST}),a.push("/")}})).catch((function(e){e.response?(s({type:p.CATCH_ERROR,payload:e.response.data.message}),s({type:p.FAIL_REQUEST})):s({type:p.FAIL_REQUEST,payload:"No server response. Please try letter."})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e,j))})),noValidate:!0,children:[Object(E.jsxs)("div",{className:Ne.a.inputWrapper,children:[Object(E.jsx)("input",Object(Ee.a)({className:Ne.a.input,type:"text",placeholder:"Name"},f("name",{minLength:{value:2,message:"Your name must be at least 2 characters"},required:{value:!0,message:"You must enter your name"}}))),Object(E.jsx)("span",{className:Ne.a.error,children:null===(e=S.name)||void 0===e?void 0:e.message})]}),Object(E.jsxs)("div",{className:Ne.a.inputWrapper,children:[Object(E.jsx)("input",Object(Ee.a)({className:Ne.a.input,type:"text",placeholder:"Email"},f("email",{pattern:{value:/^[\w-]+@([\w-]+\.)+[\w-]{2,4}$/,message:"Invalid email"},required:{value:!0,message:"You must enter your email"}}))),Object(E.jsx)("span",{className:Ne.a.error,children:null===(a=S.email)||void 0===a?void 0:a.message})]}),Object(E.jsxs)("div",{className:Ne.a.inputWrapper,children:[Object(E.jsx)("input",Object(Ee.a)({className:Ne.a.input,type:"password",placeholder:"Password"},f("password",{minLength:{value:6,message:"Your password must be at least 6 characters"},required:{value:!0,message:"You must enter your password"}}))),Object(E.jsx)("span",{className:Ne.a.error,children:null===(t=S.password)||void 0===t?void 0:t.message})]}),Object(E.jsxs)("div",{className:Ne.a.formLinkWrapper,children:[Object(E.jsx)("span",{className:Ne.a.formSpan,children:"Already have account?"}),Object(E.jsx)(o.b,{className:Ne.a.formLink,to:"/login",children:"Sign in"})]}),Object(E.jsx)(ie,{loading:r,disabled:r,children:"Sign up"})]}),u&&Object(E.jsx)(ee,{toast:u})]})},Re=t(92),Ae=t.n(Re)()("http://localhost:5000"),ye=t(93),Ie=t.n(ye),we=function(){var e=Object(c.b)(),a=Object(l.g)(),t=Object(c.c)((function(e){return e.auth})).loggedIn,s=Object(c.c)((function(e){return e.errors})).error;return Object(r.useEffect)((function(){var t=localStorage.getItem("jwtToken");if(t){var s=Object(i.a)(t);O(t),e(b(s)),s.exp&&function(e){return e-10<=Math.floor((new Date).getTime()/1e3)}(s.exp)&&e(h(a))}Ae.on("SERVER:NEW_MESSAGE",(function(a){e(function(e){return{type:p.MESSAGES_ADD_MESSAGE,payload:e}}(a)),e(function(e){return{type:p.CONVERSATIONS_UPDATE_LAST_MESSAGE,payload:e}}(a))})),Ae.on("SERVER:CONVERSATION_CREATED",(function(a){e(function(e){return{type:p.CONVERSATIONS_ADD_CONVERSATION,payload:e}}(a))}))}),[]),Object(E.jsxs)("div",{className:Ie.a.app,children:[t?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(C,{}),Object(E.jsxs)(l.d,{children:[Object(E.jsx)(l.b,{exact:!0,path:"/chat",component:Se}),Object(E.jsx)(l.b,{path:"/chat/:id",component:J}),Object(E.jsx)(l.a,{from:"*",to:"/chat"})]})]}):Object(E.jsxs)(l.d,{children:[Object(E.jsx)(l.b,{path:"/login",component:Ce}),Object(E.jsx)(l.b,{path:"/register",component:Te}),Object(E.jsx)(l.a,{from:"*",to:"/login"})]}),s&&Object(E.jsx)(ee,{toast:s})]})},Ue=t(43),ke=t(94),Le=t(95),Me={loggedIn:!1,loading:!1},De=t(11),Ve={messages:[],loading:!0},Qe=function(e){return e.sort((function(e,a){return+new Date(e.lastMessage.createdAt)-+new Date(a.lastMessage.createdAt)})).reverse()},Fe={loading:!0,conversations:[]},Ge={},We=Object(Ue.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case p.AUTH_REQUEST:return Object(Ee.a)(Object(Ee.a)({},e),{},{loading:!0});case p.SUCCESS_REQUEST:case p.FAIL_REQUEST:return Object(Ee.a)(Object(Ee.a)({},e),{},{loading:!1});case p.SET_CURRENT_USER:return Object(Ee.a)(Object(Ee.a)({},e),{},{user:a.payload,loggedIn:!0});case p.USER_LOGOUT:return Object(Ee.a)(Object(Ee.a)({},e),{},{user:void 0,loggedIn:!1});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case p.MESSAGES_REQUEST:return Object(Ee.a)(Object(Ee.a)({},e),{},{loading:!0});case p.MESSAGES_SUCCESS_REQUEST:return Object(Ee.a)(Object(Ee.a)({},e),{},{loading:!1,messages:a.payload});case p.MESSAGES_FAIL_REQUEST:return Object(Ee.a)(Object(Ee.a)({},e),{},{loading:!1});case p.MESSAGES_ADD_MESSAGE:return Object(Ee.a)(Object(Ee.a)({},e),{},{messages:[].concat(Object(De.a)(e.messages),[a.payload])});default:return e}},conversations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case p.CONVERSATIONS_REQUEST:return Object(Ee.a)(Object(Ee.a)({},e),{},{loading:!0});case p.CONVERSATIONS_SUCCESS_REQUEST:return Object(Ee.a)(Object(Ee.a)({},e),{},{loading:!1,conversations:Qe(a.payload)});case p.CONVERSATIONS_FAIL_REQUEST:return Object(Ee.a)(Object(Ee.a)({},e),{},{loading:!1});case p.CONVERSATIONS_ADD_CONVERSATION:return Object(Ee.a)(Object(Ee.a)({},e),{},{conversations:[a.payload].concat(Object(De.a)(e.conversations))});case p.CONVERSATIONS_UPDATE_LAST_MESSAGE:var t=a.payload,s=t._id,n=t.conversation,c=t.text,o=t.createdAt,r=t.createdBy,i=t.updatedAt,l={_id:s,text:c,conversation:n._id,createdBy:r._id,createdAt:o,updatedAt:i},u=e.conversations.map((function(e){return e._id===a.payload.conversation._id?Object(Ee.a)(Object(Ee.a)({},e),{},{lastMessage:l}):e}));return Object(Ee.a)(Object(Ee.a)({},e),{},{conversations:Qe(u)});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case p.CATCH_ERROR:return Object(Ee.a)(Object(Ee.a)({},e),{},{error:a.payload});case p.REMOVE_ERROR:return Object(Ee.a)(Object(Ee.a)({},e),{},{error:void 0});default:return e}}}),He=Object(Ue.createStore)(We,Object(ke.composeWithDevTools)(Object(Ue.applyMiddleware)(Le.a)));t(152);n.a.render(Object(E.jsx)(c.a,{store:He,children:Object(E.jsx)(o.a,{children:Object(E.jsx)(we,{})})}),document.getElementById("root"))},20:function(e,a,t){e.exports={loader:"Conversations_loader__3C4cM",empty:"Conversations_empty__f4tGa",conversationsWrapper:"Conversations_conversationsWrapper__13iIQ",conversations:"Conversations_conversations__1Jk_5",conversationsList:"Conversations_conversationsList__2sd4r",logo:"Conversations_logo__3r70z",conversationInfo:"Conversations_conversationInfo__ljuJL",text:"Conversations_text__2micG",name:"Conversations_name__k8DqI",icons:"Conversations_icons__y0aZc",tooltip:"Conversations_tooltip__2OVms"}},28:function(e,a,t){e.exports={toastContainer:"Toast_toastContainer__3LOni",toast:"Toast_toast__1eJK8",closedToast:"Toast_closedToast__2jPht",toastContent:"Toast_toastContent__3Z8lJ",toastIcon:"Toast_toastIcon__1VlGQ",toastClose:"Toast_toastClose__29agJ",toastCloseIcon:"Toast_toastCloseIcon__2k_4w"}},29:function(e,a,t){e.exports={user:"MessageItem_user__1_KIg",leftMessage:"MessageItem_leftMessage__3nElN",leftTime:"MessageItem_leftTime__CvbdA",leftText:"MessageItem_leftText__3P3bD",rightMessage:"MessageItem_rightMessage__2zJ_w",rightTime:"MessageItem_rightTime__1efp-",rightText:"MessageItem_rightText__1g1aP"}},31:function(e,a,t){e.exports={emojis:"EmojiMenu_emojis__tXRbu",emojisList:"EmojiMenu_emojisList__195sa",emojisListHide:"EmojiMenu_emojisListHide__1z034",emoji:"EmojiMenu_emoji__1lPKm"}},32:function(e,a,t){e.exports={conversation:"ConversationItem_conversation__Ma1wR",active:"ConversationItem_active__1y9Rb",text:"ConversationItem_text__2Jx7Y",name:"ConversationItem_name__1xkac",message:"ConversationItem_message__38thm",time:"ConversationItem_time___oR81"}},33:function(e,a,t){e.exports={modalWrapper:"Modal_modalWrapper__3oO7k",modalWrapperHide:"Modal_modalWrapperHide__oIKhC",modal:"Modal_modal__2Tcfg",modalHide:"Modal_modalHide__2eiXW"}},37:function(e,a,t){e.exports={button:"Button_button__EQ7fQ",loadingWrapper:"Button_loadingWrapper__3ko1N",showLoading:"Button_showLoading__3Uvwa",hideLoading:"Button_hideLoading__2SYTP"}},52:function(e,a,t){e.exports={link:"Logo_link__1aDBr",icon:"Logo_icon__1ps-q"}},53:function(e,a,t){e.exports={loader:"Loader_loader__2HWoM",circular:"Loader_circular__39jY9",rotate:"Loader_rotate__1qJF2",path:"Loader_path__3bK0n",dash:"Loader_dash__M0Rq1",color:"Loader_color__uwP9i"}},54:function(e,a,t){e.exports={form:"Search_form__2tkVG",input:"Search_input__3-M3e",button:"Search_button__Bo7Or"}},55:function(e,a,t){e.exports={starter:"ChatStarter_starter__3y4AI",icon:"ChatStarter_icon__30pju",subtitle:"ChatStarter_subtitle__1W9sC"}},63:function(e,a,t){e.exports={navbar:"Navbar_navbar__x28Vm",navbarInner:"Navbar_navbarInner__1eMQN",menu:"Navbar_menu__2IfAg",menuIcon:"Navbar_menuIcon__2ZPFr",header:"Navbar_header__1IKBu",text:"Navbar_text__2YNxT",name:"Navbar_name__3X2G7",email:"Navbar_email__qp1za",nav:"Navbar_nav__3crdO",navItem:"Navbar_navItem__B9bCc",active:"Navbar_active__3A4RT",navIcon:"Navbar_navIcon__1aJlv"}},64:function(e){e.exports=JSON.parse('[{"unicode":"\ud83d\ude03","tags":["face","mouth","open","smile"]},{"unicode":"\ud83d\ude04","tags":["eye","face","mouth","open","smile"]},{"unicode":"\ud83d\ude01","tags":["eye","face","grin","smile"]},{"unicode":"\ud83d\ude05","tags":["cold","face","open","smile","sweat"]},{"unicode":"\ud83e\udd23","tags":["face","floor","laugh","rolling"]},{"unicode":"\ud83d\ude02","tags":["face","joy","laugh","tear"]},{"unicode":"\ud83d\ude42","tags":["face","smile"]},{"unicode":"\ud83d\ude43","tags":["face","upside-down"]},{"unicode":"\ud83d\ude09","tags":["face","wink"]},{"unicode":"\ud83d\ude0a","tags":["blush","eye","face","smile"]},{"unicode":"\ud83d\ude07","tags":["angel","face","fantasy","halo","innocent"]},{"unicode":"\ud83e\udd70","tags":["adore","crush","hearts","in love"]},{"unicode":"\ud83d\ude0d","tags":["eye","face","love","smile"]},{"unicode":"\ud83e\udd29","tags":["eyes","face","grinning","star"]},{"unicode":"\ud83d\ude18","tags":["face","kiss"]},{"unicode":"\ud83d\ude17","tags":["face","kiss"]},{"unicode":"\ud83d\ude1a","tags":["closed","eye","face","kiss"]},{"unicode":"\ud83d\ude19","tags":["eye","face","kiss","smile"]},{"unicode":"\ud83d\ude0b","tags":["delicious","face","savouring","smile","yum"]},{"unicode":"\ud83d\ude1b","tags":["face","tongue"]},{"unicode":"\ud83d\ude1c","tags":["eye","face","joke","tongue","wink"]},{"unicode":"\ud83e\udd2a","tags":["eye","goofy","large","small"]},{"unicode":"\ud83d\ude1d","tags":["eye","face","horrible","taste","tongue"]},{"unicode":"\ud83e\udd11","tags":["face","money","mouth"]},{"unicode":"\ud83e\udd17","tags":["face","hug","hugging"]},{"unicode":"\ud83e\udd2d","tags":["whoops"]},{"unicode":"\ud83e\udd2b","tags":["quiet","shush"]},{"unicode":"\ud83e\udd14","tags":["face","thinking"]},{"unicode":"\ud83e\udd10","tags":["face","mouth","zipper"]},{"unicode":"\ud83e\udd28","tags":["distrust","skeptic"]},{"unicode":"\ud83d\ude10\ufe0f","tags":["deadpan","face","meh","neutral"]},{"unicode":"\ud83d\ude11","tags":["expressionless","face","inexpressive","meh","unexpressive"]},{"unicode":"\ud83d\ude0f","tags":["face","smirk"]},{"unicode":"\ud83d\ude12","tags":["face","unamused","unhappy"]},{"unicode":"\ud83d\ude44","tags":["eyeroll","eyes","face","rolling"]},{"unicode":"\ud83d\ude2c","tags":["face","grimace"]},{"unicode":"\ud83e\udd25","tags":["face","lie","pinocchio"]},{"unicode":"\ud83d\ude0c","tags":["face","relieved"]},{"unicode":"\ud83d\ude14","tags":["dejected","face","pensive"]},{"unicode":"\ud83d\ude2a","tags":["face","sleep"]},{"unicode":"\ud83e\udd24","tags":["drooling","face"]},{"unicode":"\ud83d\ude34","tags":["face","sleep","zzz"]},{"unicode":"\ud83d\ude37","tags":["cold","doctor","face","mask","sick"]},{"unicode":"\ud83e\udd12","tags":["face","ill","sick","thermometer"]},{"unicode":"\ud83e\udd15","tags":["bandage","face","hurt","injury"]},{"unicode":"\ud83e\udd22","tags":["face","nauseated","vomit"]},{"unicode":"\ud83e\udd2e","tags":["sick","vomit"]},{"unicode":"\ud83e\udd75","tags":["feverish","heat stroke","hot","red-faced","sweating"]},{"unicode":"\ud83e\udd76","tags":["blue-faced","cold","freezing","frostbite","icicles"]},{"unicode":"\ud83e\udd74","tags":["dizzy","intoxicated","tipsy","uneven eyes","wavy mouth"]},{"unicode":"\ud83d\ude35","tags":["dizzy","face"]},{"unicode":"\ud83d\ude0e","tags":["bright","cool","face","sun","sunglasses"]},{"unicode":"\ud83d\ude1f","tags":["face","worried"]},{"unicode":"\ud83d\ude41","tags":["face","frown"]},{"unicode":"\u2639\ufe0f","tags":["face","frown"]},{"unicode":"\ud83d\ude2e","tags":["face","mouth","open","sympathy"]},{"unicode":"\ud83d\ude2f","tags":["face","hushed","stunned","surprised"]},{"unicode":"\ud83d\ude32","tags":["astonished","face","shocked","totally"]},{"unicode":"\ud83d\ude33","tags":["dazed","face","flushed"]},{"unicode":"\ud83e\udd7a","tags":["begging","mercy","puppy eyes"]},{"unicode":"\ud83d\ude26","tags":["face","frown","mouth","open"]},{"unicode":"\ud83d\ude27","tags":["anguished","face"]},{"unicode":"\ud83d\ude28","tags":["face","fear","fearful","scared"]},{"unicode":"\ud83d\ude30","tags":["blue","cold","face","rushed","sweat"]},{"unicode":"\ud83d\ude25","tags":["disappointed","face","relieved","whew"]},{"unicode":"\ud83d\ude22","tags":["cry","face","sad","tear"]},{"unicode":"\ud83d\ude2d","tags":["cry","face","sad","sob","tear"]},{"unicode":"\ud83d\ude31","tags":["face","fear","munch","scared","scream"]},{"unicode":"\ud83d\ude16","tags":["confounded","face"]},{"unicode":"\ud83d\ude23","tags":["face","persevere"]},{"unicode":"\ud83d\ude21","tags":["angry","face","mad","pouting","rage","red"]},{"unicode":"\ud83d\ude20","tags":["angry","face","mad"]},{"unicode":"\ud83d\ude08","tags":["face","fairy tale","fantasy","horns","smile"]},{"unicode":"\ud83d\udc7f","tags":["demon","devil","face","fantasy","imp"]},{"unicode":"\ud83d\udc7e","tags":["alien","creature","extraterrestrial","face","monster","ufo"]},{"unicode":"\ud83e\udd16","tags":["face","monster"]},{"unicode":"\ud83d\ude3a","tags":["cat","face","grinning","mouth","open","smile"]},{"unicode":"\ud83d\ude38","tags":["cat","eye","face","grin","smile"]},{"unicode":"\ud83d\ude39","tags":["cat","face","joy","tear"]},{"unicode":"\ud83d\ude3b","tags":["cat","eye","face","heart","love","smile"]},{"unicode":"\ud83d\ude3c","tags":["cat","face","ironic","smile","wry"]},{"unicode":"\ud83d\ude3d","tags":["cat","eye","face","kiss"]},{"unicode":"\ud83d\ude40","tags":["cat","face","oh","surprised","weary"]},{"unicode":"\ud83d\ude3f","tags":["cat","cry","face","sad","tear"]},{"unicode":"\ud83d\ude3e","tags":["cat","face","pouting"]},{"unicode":"\ud83d\ude48","tags":["evil","face","forbidden","monkey","see"]},{"unicode":"\ud83d\ude49","tags":["evil","face","forbidden","hear","monkey"]},{"unicode":"\ud83d\ude4a","tags":["evil","face","forbidden","monkey","speak"]},{"unicode":"\ud83d\udc94","tags":["break","broken"]},{"unicode":"\u2764\ufe0f","tags":["heart"]},{"unicode":"\ud83e\udde1","tags":["orange"]},{"unicode":"\ud83d\udc9b","tags":["yellow"]},{"unicode":"\ud83d\udc9a","tags":["green"]},{"unicode":"\ud83d\udc99","tags":["blue"]},{"unicode":"\ud83d\udc9c","tags":["purple"]},{"unicode":"\ud83e\udd0e","tags":["brown","heart"]},{"unicode":"\ud83d\udda4","tags":["black","evil","wicked"]},{"unicode":"\ud83e\udd0d","tags":["heart","white"]}]')},8:function(e,a,t){e.exports={form:"Auth_form__Ef7h2",inputWrapper:"Auth_inputWrapper__2orF_",input:"Auth_input__1w2OD",formLinkWrapper:"Auth_formLinkWrapper__3NuGX",formLink:"Auth_formLink__3XL06",formSpan:"Auth_formSpan__xjRfk",error:"Auth_error__cSuJI"}},91:function(e,a,t){e.exports={avatar:"Avatar_avatar__2pHI2"}},93:function(e,a,t){e.exports={app:"App_app__1lvGg"}}},[[153,1,2]]]);
//# sourceMappingURL=main.6c99f700.chunk.js.map